@model IEnumerable<DCTStore.Models.Music>
@using Microsoft.AspNetCore.Identity
@inject SignInManager<IdentityUser> SignInManager
@inject UserManager<IdentityUser> UserManager
@inject RoleManager<IdentityRole> RoleManager

@{
    ViewData["Title"] = "DCT Music";
}


<!-- breadcrumbs -->
<div class="breadcrumbs">
	<div class="container">
		<ol class="breadcrumb breadcrumb1 animated wow slideInLeft" data-wow-delay=".5s">
			<li><a href="index.html"><span class="glyphicon glyphicon-home" aria-hidden="true"></span>Home</a></li>
			<li class="active">@ViewData["Title"]</li>
		</ol>
	</div>
</div>
<div class="products">
	<div class="container">
		<div class="col-md-4 products-left">
			<div class="filter-price animated wow slideInUp" data-wow-delay=".5s">
				<h3>MORE DCT MUSIC</h3>
				<ul class="dropdown-menu1">
					<li>
						<a href="">
							<div id="slider-range"></div>
							<input type="text" id="amount" style="border: 0" />
						</a>
					</li>
				</ul>
				<script type='text/javascript'>
					//<![CDATA[
					$(window).load(function () {
						$("#slider-range").slider({
							range: true,
							min: 0,
							max: 100000,
							values: [10000, 60000],
							slide: function (event, ui) {
								$("#amount").val("$" + ui.values[0] + " - $" + ui.values[1]);
							}
						});
						$("#amount").val("$" + $("#slider-range").slider("values", 0) + " - $" + $("#slider-range").slider("values", 1));


					});//]]>
				</script>
				<script type="text/javascript" src="js/jquery-ui.min.js"></script>
				<!---->
			</div>
			<div class="categories animated wow slideInUp" data-wow-delay=".5s">
				<h3 class="collapsible">DCT Music Categories</h3>
				<div class="content">
					<ul class="cate">
						@foreach (var item in ViewBag.musicTypes)
						{
							if (item != null && item.MediaType != null && item.MediaType.Type != null)
							{
								<li>

									<a asp-area="" asp-controller="Musics" asp-action="GetSongsByMediaType" asp-route-mediaType="@item.MediaType.Type">@item.MediaType.Type</a> <span>(@item.Count)</span>
								</li>
							}
						}
					</ul>
				</div>

			</div>
			<div class="categories animated wow slideInUp" data-wow-delay=".5s">
				<h3 class="collapsible">Latest Music</h3>
				<div class="content">
					@foreach (var music in ViewBag.LatestUploads)
					{
						<div class="new-products-grid-left">
							<a><img src="@music.MediaType.Image" alt=" " class="img-responsive" /></a>
						</div>
						<div class="new-products-grid-right">
							<h4><a asp-action="Details" asp-route-id="@music.MusicId">@music.Title</a></h4>
							<div class="simpleCart_shelfItem new-products-grid-right-add-cart">
								<p>
									<a class="item_add"
									   href="#"
									   data-itemid="@music.MusicId"
									   data-itemcategory="Music"
									   data-title="@music.Title"
									   data-medialink="@music.MusicMediaLink"
									   data-videomedialink=""
									   data-imagemedia="@music.MediaType.Image">
										Add to cart
									</a>
								</p>
								<br>
								<p><a asp-controller="Musics" asp-action="DownloadMusic" asp-route-id="@music.MusicId">Download Now </a></p>
								<br>
							</div>
						</div>
						<div class="clearfix"> </div>
					}
				</div>
			</div>
			<div class="categories animated wow slideInUp" data-wow-delay=".5s">
				<h3 class="collapsible">DCT Lyrics Categories</h3>
				<div class="content">
					<ul class="cate">
						@foreach (var item in ViewBag.LyricTypes)
						{
							if (item != null && item.LyricType != null && item.LyricType.Type != null)
							{
								<li>

									<a asp-area="" asp-controller="Lyrics" asp-action="GetLyricsByMediaType" asp-route-mediaType="@item.LyricType.Type">@item.LyricType.Type</a> <span>(@item.Count)</span>
								</li>
							}
						}
					</ul>
				</div>

			</div>

			<style>
				/* Hide content by default */
				.content {
					display: none;
					overflow: hidden;
					padding: 0 15px;
				}

				/* Style for collapsible header */
				.collapsible {
					cursor: pointer;
					font-weight: bold;
					padding: 10px;
					margin: 0;
					background-color: #f1f1f1;
					border: 1px solid #ddd;
					text-align: left;
				}

				/* Active state */
				.active {
					background-color: #ddd;
				}
			</style>

			<script>
				document.addEventListener("DOMContentLoaded", function () {
					const collapsibles = document.querySelectorAll(".collapsible");

					collapsibles.forEach(collapsible => {
						collapsible.addEventListener("click", function () {
							// Close any open content
							collapsibles.forEach(c => {
								if (c !== this) {
									c.classList.remove("active");
									c.nextElementSibling.style.display = "none";
								}
							});

							// Toggle the clicked content
							this.classList.toggle("active");
							const content = this.nextElementSibling;
							if (content.style.display === "block") {
								content.style.display = "none";
							} else {
								content.style.display = "block";
							}
						});
					});
				});
			</script>
		</div>
		<div class="col-md-8 products-right">
			<div class="products-right-grid">
				<div class="products-right-grids animated wow slideInRight" data-wow-delay=".5s">
					
					<div>
						@if (SignInManager.IsSignedIn(User) && User.IsInRole("Admin"))
						{
							<a asp-action="Create" class="btn btn-default">Create New</a>
						}
					</div>
					<div class="clearfix"> </div>
				</div>
				
			</div>
			<div class="products-right-grids-bottom">
				@if (SignInManager.IsSignedIn(User) && User.IsInRole("Admin"))
				{
					var counter = 0;
					foreach (var item in Model)
					{
						<div class="col-md-4 products-right-grids-bottom-grid">
							<div class="new-collections-grid1 products-right-grid1 animated wow slideInUp" data-wow-delay=".5s">
								<div class="new-collections-grid1-image">
									<a href="single.html" class="product-image"><img src="@item.MediaType.Image" alt=" " class="img-responsive"></a>
									<div class="new-collections-grid1-image-pos products-right-grids-pos">
										<a asp-action="Details" asp-route-id="@item.MusicId">View Track</a>
									</div>
								</div>
								<h4><a href="single.html">@item.Title</a></h4>
								<div class="simpleCart_shelfItem products-right-grid1-add-cart">
									<p>
										<span class="sermon_price"></span>
										<a class="item_add"
										   href="#"
										   data-itemid="@item.MusicId"
										   data-itemcategory="Music"
										   data-title="@item.Title"
										   data-medialink="@item.MusicMediaLink"
										   data-videomedialink=""
										   data-imagemedia="@item.MediaType.Image">
											Add to Cart
										</a>
									</p>
									<p><a asp-controller="Musics" asp-action="DownloadMusic" asp-route-id="@item.MusicId">Download Now</a></p>
									<p><a class="item_add" href="#">Details </a></p>
									<p><a class="item_add" href="#">Edit </a></p>
									<p><a class="item_add" href="#">Delete </a></p>
								</div>
							</div>
						</div>

						counter++;

						if (counter % 3 == 0)
						{
							<div class="clearfix"></div>
						}
					}
				}
				else
				{
					var counter = 0;
					foreach (var item in Model)
					{
						<div class="col-md-4 products-right-grids-bottom-grid">
							<div class="new-collections-grid1 products-right-grid1 animated wow slideInUp" data-wow-delay=".5s">
								<div class="new-collections-grid1-image">
									<a href="single.html" class="product-image"><img src="@item.MediaType.Image" alt=" " class="img-responsive"></a>
									<div class="new-collections-grid1-image-pos products-right-grids-pos">
										<a asp-action="Details" asp-route-id="@item.MusicId">View Track</a>
									</div>
								</div>
								<h4><a href="single.html">@item.Title</a></h4>
								<div class="simpleCart_shelfItem products-right-grid1-add-cart">
									<p>
										<span class="sermon_price"></span>
										<a class="item_add"
										   href="#"
										   data-itemid="@item.MusicId"
										   data-itemcategory="Music"
										   data-title="@item.Title"
										   data-medialink="@item.MusicMediaLink"
										   data-videomedialink=""
										   data-imagemedia="@item.MediaType.Image">
											Add to Cart
										</a>
									</p>
									<p><a asp-controller="Musics" asp-action="DownloadMusic" asp-route-id="@item.MusicId">Download Now</a></p>
									
								</div>
							</div>
						</div>

						counter++;

						if (counter % 3 == 0)
						{
							<div class="clearfix"></div>
						}
					}
				}
			</div>

			@if (ViewBag.TotalPages > 1)
			{
				<nav class="numbering animated wow slideInRight" data-wow-delay=".5s">
					<ul class="pagination paging">
						<li>
							<a href="?page=1" aria-label="First">
								<span aria-hidden="true">&laquo;&laquo;</span>
							</a>
						</li>
						@for (int i = 1; i <= ViewBag.TotalPages; i++)
						{
							<li class="@(i == ViewBag.CurrentPage ? "active" : "")">
								<a href="?page=@i">@i</a>
							</li>
						}
						<li>
							<a href="?page=@ViewBag.TotalPages" aria-label="Last">
								<span aria-hidden="true">&raquo;&raquo;</span>
							</a>
						</li>
					</ul>
				</nav>
			}

		</div>
		<div class="clearfix"> </div>
	</div>
</div>
<!-- //breadcrumbs -->


